<center>
<button class="embedded-verse">
    <style>
        @font-face {
            font-family: 'Kitab';
            src: url('./assets/fonts/Kitab-Bold.ttf') format('truetype');
            font-weight: 700;
            font-style: normal;
            font-display: swap;
        }
        @font-face {
            font-family: 'StackSansNotch';
            src: url('./assets/fonts/StackSansNotch-Bold.ttf') format('truetype');
            font-weight: 700;
            font-style: normal;
            font-display: swap;
        }

        .embedded-verse {
            padding: 18px;
            box-sizing: border-box;
            width: 100%;
            max-width: 100%;
            margin: auto;
            border-radius: 14px;
            background: #fafafa;
            border: 1px solid #e3e3e3;
            cursor: pointer;

            /* yumuşak gölge */
            box-shadow: 0 4px 14px rgba(0, 0, 0, 0.08);

            /* dokununca hafif büyüsün */
            transition: transform .15s ease, box-shadow .15s ease;
        }

        .embedded-verse:hover {
            transform: scale(1.01);
            box-shadow: 0 6px 18px rgba(0,0,0,0.12);
        }

        #arabic {
            font-family: 'Kitab', 'Noto Naskh Arabic', serif;
            font-size: 34px;
            font-weight: 700;
            margin: 5px 0 10px;
            text-align: center;
            line-height: 1.5;
            word-break: break-word;

            /* hat estetiğini öne çıkaran ince altın rengi */
            color: #222;
        }

        #meal {
            font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Noto Sans', sans-serif;
            font-size: 17px;
            margin: 12px 0;
            text-align: center;
            color: #333;
            line-height: 1.6;
        }

        #num, #copyright, #mealName {
            font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Noto Sans', sans-serif;
            font-size: 13px;
            font-weight: 600;
            color: #666;
            margin-bottom: 6px;
            text-align: center;
        }

        @media (max-width: 480px) {
            .embedded-verse { padding: 12px; border-radius: 10px; }
            #arabic { font-size: 26px; }
            #meal { font-size: 14px; }
            #num, #copyright { font-size: 11px; }
        }

        @media (max-width: 360px) {
            #arabic { font-size: 22px; }
            #meal { font-size: 12px; }
        }
    </style>

    <div id="arabic"></div>
    <div id="meal"></div>
    <div id="num"></div>
    <div id="mealName"></div><br>
    <div id="copyright">kuran.yasireymen.com</div>
    
</button>
</center>

<script>
    function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
    }

    const sure = getQueryParam("sure");
    const ayet = getQueryParam("ayet");
    const meal = getQueryParam("meal");

    async function loadVerse() {
        if (!ayet || isNaN(ayet)) window.location.href = "/";
        try {
            const response = await fetch(`./data/verses/${sure}.json`);
            const data = await response.json();
            const verse = data.verses[ayet - 1];

            document.querySelector("#arabic").innerHTML = verse.arabic;
            document.querySelector("#num").innerHTML =
                `Ayet ${verse.verseNumber} (${verse.verseKey})`;
        } catch {
            window.location.href = "/";
        }

        try {
            const response = await fetch(`./data/mealler/${meal}.json`);
            const data = await response.json();
            const verse = data.sures[sure - 1].ayetler[ayet - 1][1];

            document.querySelector("#meal").innerHTML = verse;
            document.querySelector("#mealName").innerHTML = `${data.name} meali`;
        } catch {
            window.location.href = "/";
        }
    }

    if (sure && !isNaN(sure) && sure >= 1 && sure <= 114) {
        try { loadVerse(); } catch { window.location.href = "/"; }
    } else window.location.href = "/";

    document.querySelector("button.embedded-verse").addEventListener("click", function () {
        window.open(`./kuran.html?sure=${sure}#${ayet}`, "_blank");
    });

    function sendHeight() {
        const height = document.body.scrollHeight;
        parent.postMessage({
            embedHeight: height,
            name: `${sure}:${ayet}`
        }, "*");
    }

    // İlk yüklemede gönder
    window.addEventListener("load", sendHeight);
    // İçerik değişince gönder
    window.addEventListener("resize", sendHeight);

    let i = 1;

    const si = setInterval(function() {
        if (i == 10) clearInterval(si);
        sendHeight();
        i++;
    }, 1000);

</script>